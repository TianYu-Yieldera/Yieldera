{
  "_format": "hh-sol-artifact-1",
  "contractName": "LiquidityMiningStrategy",
  "sourceName": "contracts/layer2/adapters/examples/LiquidityMiningStrategy.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_uniswapAdapter",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "token",
          "type": "address"
        }
      ],
      "name": "SafeERC20FailedOperation",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount0",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount1",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint128",
          "name": "liquidityAdded",
          "type": "uint128"
        }
      ],
      "name": "FeesCompounded",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "int24",
          "name": "newTickLower",
          "type": "int24"
        },
        {
          "indexed": false,
          "internalType": "int24",
          "name": "newTickUpper",
          "type": "int24"
        }
      ],
      "name": "PositionRebalanced",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "token0",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "token1",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint24",
          "name": "fee",
          "type": "uint24"
        },
        {
          "indexed": false,
          "internalType": "int24",
          "name": "tickLower",
          "type": "int24"
        },
        {
          "indexed": false,
          "internalType": "int24",
          "name": "tickUpper",
          "type": "int24"
        }
      ],
      "name": "StrategyDeployed",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        }
      ],
      "name": "checkRebalanceNeeded",
      "outputs": [
        {
          "internalType": "bool",
          "name": "needsRebalance",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        }
      ],
      "name": "compoundFees",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "token0",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "token1",
              "type": "address"
            },
            {
              "internalType": "uint24",
              "name": "fee",
              "type": "uint24"
            },
            {
              "internalType": "int24",
              "name": "tickLower",
              "type": "int24"
            },
            {
              "internalType": "int24",
              "name": "tickUpper",
              "type": "int24"
            },
            {
              "internalType": "uint256",
              "name": "rebalanceThreshold",
              "type": "uint256"
            }
          ],
          "internalType": "struct LiquidityMiningStrategy.StrategyParams",
          "name": "params",
          "type": "tuple"
        },
        {
          "internalType": "uint256",
          "name": "amount0",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "amount1",
          "type": "uint256"
        }
      ],
      "name": "deployStrategy",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        }
      ],
      "name": "emergencyWithdraw",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        }
      ],
      "name": "estimateAPY",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "apy",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        }
      ],
      "name": "getPositionValue",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "value0",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "value1",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getStrategyStats",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "totalPositions",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalLiquidity",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalFees",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "positionCount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "positions",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "tokenId",
          "type": "uint256"
        },
        {
          "internalType": "uint128",
          "name": "liquidity",
          "type": "uint128"
        },
        {
          "internalType": "uint256",
          "name": "feesCollected0",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "feesCollected1",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "lastRebalance",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        },
        {
          "internalType": "int24",
          "name": "newTickLower",
          "type": "int24"
        },
        {
          "internalType": "int24",
          "name": "newTickUpper",
          "type": "int24"
        }
      ],
      "name": "rebalancePosition",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "uniswapAdapter",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "token",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "withdrawProfits",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b50604051610c69380380610c6983398101604081905261002f91610062565b60008054336001600160a01b031991821617909155600180549091166001600160a01b0392909216919091179055610092565b60006020828403121561007457600080fd5b81516001600160a01b038116811461008b57600080fd5b9392505050565b610bc8806100a16000396000f3fe608060405234801561001057600080fd5b50600436106100cf5760003560e01c8063aafc96511161008c578063e7702d0511610066578063e7702d0514610224578063f1eb17f61461022d578063f2a6bbc314610250578063f5de7bfd1461026c57600080fd5b8063aafc9651146101d6578063b86a0aaa146101e9578063cd809ad41461021157600080fd5b80635312ea8e146100d457806373c032cd146100e95780638da5cb5b146100fc57806399fbab881461012c578063a15bca0b146101a2578063a81de517146101b5575b600080fd5b6100e76100e2366004610946565b61028f565b005b6100e76100f7366004610946565b610333565b60005461010f906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b61017261013a366004610946565b60026020819052600091825260409091208054600182015492820154600383015460049093015491936001600160801b031692909185565b604080519586526001600160801b039094166020860152928401919091526060830152608082015260a001610123565b60015461010f906001600160a01b031681565b6101c86101c33660046109a0565b6103b2565b604051908152602001610123565b6100e76101e4366004610a68565b61057b565b6101fc6101f7366004610946565b6105c3565b60408051928352602083019190915201610123565b6100e761021f366004610a92565b610610565b6101c860035481565b6102356106be565b60408051938452602084019290925290820152606001610123565b6101c861025e366004610946565b60005260026020526101f490565b61027f61027a366004610946565b610727565b6040519015158152602001610123565b6000546001600160a01b031633146102c25760405162461bcd60e51b81526004016102b990610ace565b60405180910390fd5b600081815260026020526040902060018101546001600160801b03166102fa5760405162461bcd60e51b81526004016102b990610af1565b50600090815260026020819052604082208281556001810180546001600160801b03191690559081018290556003810182905560040155565b600081815260026020526040902060018101546001600160801b031661036b5760405162461bcd60e51b81526004016102b990610af1565b6040805160008082526020820181905281830152905183917f2a46e9055f7ae5012e8d6c92c53bc9c64cb2f7abe85b386ef25b08e71fe20b46919081900360600190a25050565b600080546001600160a01b031633146103dd5760405162461bcd60e51b81526004016102b990610ace565b6000831180156103ed5750600082115b61042b5760405162461bcd60e51b815260206004820152600f60248201526e496e76616c696420616d6f756e747360881b60448201526064016102b9565b8351610442906001600160a01b0316333086610751565b602084015161045c906001600160a01b0316333085610751565b6001548451610478916001600160a01b039182169116856107be565b6001546020850151610497916001600160a01b039182169116846107be565b600380549060006104a783610b31565b9091555060008181526002602052604090208181559091506104c98385610b4a565b6001820180546001600160801b0319166001600160801b039290921691909117905542600482015584516020808701516040808901516060808b01516080808d015185516001600160a01b03998a168152989096169688019690965262ffffff90921692860192909252600290810b918501919091520b9082015282907ffbc7cab161f0d51b6a39533f8281ebad5abed2a41ddfca140ae54fd678345f3f9060a00160405180910390a2509392505050565b6000546001600160a01b031633146105a55760405162461bcd60e51b81526004016102b990610ace565b6000546105bf906001600160a01b0384811691168361084e565b5050565b60008181526002602081905260408220600181015483926105ec916001600160801b0316610b5d565b6001820154610606906002906001600160801b0316610b5d565b9250925050915091565b6000546001600160a01b0316331461063a5760405162461bcd60e51b81526004016102b990610ace565b600083815260026020526040902060018101546001600160801b03166106725760405162461bcd60e51b81526004016102b990610af1565b42600482015560408051600285810b825284900b602082015285917fddeb651c3c5acecf292901bcf399e51d7a06a012e320facbc4bfab7c10555270910160405180910390a250505050565b600354600080805b60035481101561072157600081815260026020526040902060018101546106f6906001600160801b031685610b4a565b93508060030154816002015461070c9190610b4a565b6107169084610b4a565b9250506001016106c6565b50909192565b6000818152600260205260408120600481015462093a80906107499042610b7f565b119392505050565b6040516001600160a01b0384811660248301528381166044830152606482018390526107b89186918216906323b872dd906084015b604051602081830303815290604052915060e01b6020820180516001600160e01b038381831617835250505050610884565b50505050565b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b031663095ea7b360e01b17905261080f84826108f5565b6107b8576040516001600160a01b0384811660248301526000604483015261084491869182169063095ea7b390606401610786565b6107b88482610884565b6040516001600160a01b0383811660248301526044820183905261087f91859182169063a9059cbb90606401610786565b505050565b600080602060008451602086016000885af1806108a7576040513d6000823e3d81fd5b50506000513d915081156108bf5780600114156108cc565b6001600160a01b0384163b155b156107b857604051635274afe760e01b81526001600160a01b03851660048201526024016102b9565b6000806000806020600086516020880160008a5af192503d9150600051905082801561093a5750811561092b578060011461093a565b6000866001600160a01b03163b115b93505050505b92915050565b60006020828403121561095857600080fd5b5035919050565b80356001600160a01b038116811461097657600080fd5b919050565b803562ffffff8116811461097657600080fd5b8035600281900b811461097657600080fd5b60008060008385036101008112156109b757600080fd5b60c08112156109c557600080fd5b5060405160c0810181811067ffffffffffffffff821117156109f757634e487b7160e01b600052604160045260246000fd5b604052610a038561095f565b8152610a116020860161095f565b6020820152610a226040860161097b565b6040820152610a336060860161098e565b6060820152610a446080860161098e565b608082015260a085810135908201529560c0850135955060e0909401359392505050565b60008060408385031215610a7b57600080fd5b610a848361095f565b946020939093013593505050565b600080600060608486031215610aa757600080fd5b83359250610ab76020850161098e565b9150610ac56040850161098e565b90509250925092565b6020808252600990820152682737ba1037bbb732b960b91b604082015260600190565b60208082526010908201526f24b73b30b634b2103837b9b4ba34b7b760811b604082015260600190565b634e487b7160e01b600052601160045260246000fd5b600060018201610b4357610b43610b1b565b5060010190565b8082018082111561094057610940610b1b565b600082610b7a57634e487b7160e01b600052601260045260246000fd5b500490565b8181038181111561094057610940610b1b56fea264697066735822122004f163dbd544e2bb4afa5b55bb1fbe7184f09d7a564386937fcf7bd8ecb452df64736f6c63430008160033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100cf5760003560e01c8063aafc96511161008c578063e7702d0511610066578063e7702d0514610224578063f1eb17f61461022d578063f2a6bbc314610250578063f5de7bfd1461026c57600080fd5b8063aafc9651146101d6578063b86a0aaa146101e9578063cd809ad41461021157600080fd5b80635312ea8e146100d457806373c032cd146100e95780638da5cb5b146100fc57806399fbab881461012c578063a15bca0b146101a2578063a81de517146101b5575b600080fd5b6100e76100e2366004610946565b61028f565b005b6100e76100f7366004610946565b610333565b60005461010f906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b61017261013a366004610946565b60026020819052600091825260409091208054600182015492820154600383015460049093015491936001600160801b031692909185565b604080519586526001600160801b039094166020860152928401919091526060830152608082015260a001610123565b60015461010f906001600160a01b031681565b6101c86101c33660046109a0565b6103b2565b604051908152602001610123565b6100e76101e4366004610a68565b61057b565b6101fc6101f7366004610946565b6105c3565b60408051928352602083019190915201610123565b6100e761021f366004610a92565b610610565b6101c860035481565b6102356106be565b60408051938452602084019290925290820152606001610123565b6101c861025e366004610946565b60005260026020526101f490565b61027f61027a366004610946565b610727565b6040519015158152602001610123565b6000546001600160a01b031633146102c25760405162461bcd60e51b81526004016102b990610ace565b60405180910390fd5b600081815260026020526040902060018101546001600160801b03166102fa5760405162461bcd60e51b81526004016102b990610af1565b50600090815260026020819052604082208281556001810180546001600160801b03191690559081018290556003810182905560040155565b600081815260026020526040902060018101546001600160801b031661036b5760405162461bcd60e51b81526004016102b990610af1565b6040805160008082526020820181905281830152905183917f2a46e9055f7ae5012e8d6c92c53bc9c64cb2f7abe85b386ef25b08e71fe20b46919081900360600190a25050565b600080546001600160a01b031633146103dd5760405162461bcd60e51b81526004016102b990610ace565b6000831180156103ed5750600082115b61042b5760405162461bcd60e51b815260206004820152600f60248201526e496e76616c696420616d6f756e747360881b60448201526064016102b9565b8351610442906001600160a01b0316333086610751565b602084015161045c906001600160a01b0316333085610751565b6001548451610478916001600160a01b039182169116856107be565b6001546020850151610497916001600160a01b039182169116846107be565b600380549060006104a783610b31565b9091555060008181526002602052604090208181559091506104c98385610b4a565b6001820180546001600160801b0319166001600160801b039290921691909117905542600482015584516020808701516040808901516060808b01516080808d015185516001600160a01b03998a168152989096169688019690965262ffffff90921692860192909252600290810b918501919091520b9082015282907ffbc7cab161f0d51b6a39533f8281ebad5abed2a41ddfca140ae54fd678345f3f9060a00160405180910390a2509392505050565b6000546001600160a01b031633146105a55760405162461bcd60e51b81526004016102b990610ace565b6000546105bf906001600160a01b0384811691168361084e565b5050565b60008181526002602081905260408220600181015483926105ec916001600160801b0316610b5d565b6001820154610606906002906001600160801b0316610b5d565b9250925050915091565b6000546001600160a01b0316331461063a5760405162461bcd60e51b81526004016102b990610ace565b600083815260026020526040902060018101546001600160801b03166106725760405162461bcd60e51b81526004016102b990610af1565b42600482015560408051600285810b825284900b602082015285917fddeb651c3c5acecf292901bcf399e51d7a06a012e320facbc4bfab7c10555270910160405180910390a250505050565b600354600080805b60035481101561072157600081815260026020526040902060018101546106f6906001600160801b031685610b4a565b93508060030154816002015461070c9190610b4a565b6107169084610b4a565b9250506001016106c6565b50909192565b6000818152600260205260408120600481015462093a80906107499042610b7f565b119392505050565b6040516001600160a01b0384811660248301528381166044830152606482018390526107b89186918216906323b872dd906084015b604051602081830303815290604052915060e01b6020820180516001600160e01b038381831617835250505050610884565b50505050565b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b031663095ea7b360e01b17905261080f84826108f5565b6107b8576040516001600160a01b0384811660248301526000604483015261084491869182169063095ea7b390606401610786565b6107b88482610884565b6040516001600160a01b0383811660248301526044820183905261087f91859182169063a9059cbb90606401610786565b505050565b600080602060008451602086016000885af1806108a7576040513d6000823e3d81fd5b50506000513d915081156108bf5780600114156108cc565b6001600160a01b0384163b155b156107b857604051635274afe760e01b81526001600160a01b03851660048201526024016102b9565b6000806000806020600086516020880160008a5af192503d9150600051905082801561093a5750811561092b578060011461093a565b6000866001600160a01b03163b115b93505050505b92915050565b60006020828403121561095857600080fd5b5035919050565b80356001600160a01b038116811461097657600080fd5b919050565b803562ffffff8116811461097657600080fd5b8035600281900b811461097657600080fd5b60008060008385036101008112156109b757600080fd5b60c08112156109c557600080fd5b5060405160c0810181811067ffffffffffffffff821117156109f757634e487b7160e01b600052604160045260246000fd5b604052610a038561095f565b8152610a116020860161095f565b6020820152610a226040860161097b565b6040820152610a336060860161098e565b6060820152610a446080860161098e565b608082015260a085810135908201529560c0850135955060e0909401359392505050565b60008060408385031215610a7b57600080fd5b610a848361095f565b946020939093013593505050565b600080600060608486031215610aa757600080fd5b83359250610ab76020850161098e565b9150610ac56040850161098e565b90509250925092565b6020808252600990820152682737ba1037bbb732b960b91b604082015260600190565b60208082526010908201526f24b73b30b634b2103837b9b4ba34b7b760811b604082015260600190565b634e487b7160e01b600052601160045260246000fd5b600060018201610b4357610b43610b1b565b5060010190565b8082018082111561094057610940610b1b565b600082610b7a57634e487b7160e01b600052601260045260246000fd5b500490565b8181038181111561094057610940610b1b56fea264697066735822122004f163dbd544e2bb4afa5b55bb1fbe7184f09d7a564386937fcf7bd8ecb452df64736f6c63430008160033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
